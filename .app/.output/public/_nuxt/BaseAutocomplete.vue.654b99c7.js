import{d as W,a7 as X,c as w,ad as ee,aM as E,o as s,a as i,V as g,w as v,e as m,D as y,M as d,b as h,h as e,Q as te,ak as ae,l as Y,_ as le,q as se,a8 as oe,B as P,r as Q,aN as ne,ab as ue,v as ie,L as ce,$ as b,y as k,z as I,f as T,t as C,F as j,E as G,aO as re,C as de,a5 as pe}from"./entry.29987b62.js";import{_ as me}from"./BaseAvatar.vue.7843f145.js";import{_ as fe}from"./BaseIconBox.vue.5b3d63b6.js";import{W as J,Q as ve,G as ye,X as he,Y as _e,J as ge}from"./combobox.960485df.js";const be=["innerHTML"],ke=["innerHTML"],Ie=W({__name:"BaseAutocompleteItem",props:{value:{default:()=>({})},shape:{default:void 0},selectedIcon:{default:"lucide:check"},active:{type:Boolean},selected:{type:Boolean},mark:{default:"nui-mark"}},setup(_){const o=_,B=X(),t=w(()=>o.shape??B.nui.defaultShapes?.autocompleteItem),q={straight:"",rounded:"rounded-md",smooth:"rounded-lg",curved:"rounded-xl",full:"rounded-xl"},F=ee("BaseAutocompleteContext",{query:""}),$=w(()=>F.query),l=w(()=>o.mark),f=E(()=>o.value?.name,$,l),u=E(()=>o.value?.text,$,l);return(V,c)=>{const x=me,A=Y,p=fe,z=le,L=se;return s(),i("div",{class:y(["flex cursor-pointer items-center p-2 transition-colors duration-300",[o.active?"bg-muted-100 dark:bg-muted-700":"",e(t)&&q[e(t)]]])},[o.value.media&&!o.value.icon?(s(),g(x,{key:0,src:o.value.media,size:"xs",class:"me-3"},null,8,["src"])):o.value.icon&&!o.value.media?(s(),g(p,{key:1,size:"sm",shape:"rounded",class:"me-1"},{default:v(()=>[m(A,{name:o.value.icon,class:y(["h-4 w-4",[o.selected?"text-primary-500":"text-muted-500"]])},null,8,["name","class"])]),_:1})):d("",!0),h("div",null,[m(z,{as:"h4",weight:o.selected?"semibold":"normal",size:"sm",class:"text-muted-800 dark:text-white"},{default:v(()=>[h("span",{innerHTML:e(f)},null,8,be)]),_:1},8,["weight"]),V.value.text?(s(),g(L,{key:0,size:"xs",class:"text-muted-400"},{default:v(()=>[h("span",{innerHTML:e(u)},null,8,ke)]),_:1})):d("",!0)]),te(h("div",{class:y(["ms-auto flex items-center justify-center",[o.value.media&&"h-8 w-8",o.value.icon&&"h-8 w-8"]])},[m(A,{name:V.selectedIcon,class:"text-success-500 block h-4 w-4"},null,8,["name"])],2),[[ae,o.selected]])],2)}}}),we={key:1,class:"nui-autocomplete-multiple"},Be={key:0,class:"nui-autocomplete-multiple-list"},$e={class:"nui-autocomplete-multiple-list-item"},Ce=["onClick"],Ve={class:"nui-autocomplete-outer"},xe={key:1,class:"nui-autocomplete-icon"},Ae={key:4,class:"nui-autocomplete-placeload"},Se={key:2,class:"nui-autocomplete-error-text"},qe={key:0,class:"nui-autocomplete-results-placeholder"},Fe={class:"nui-autocomplete-results-placeholder-text"},ze={key:1,class:"nui-autocomplete-results-placeholder"},Le={class:"nui-autocomplete-results-placeholder-text"},Me={key:0,class:"nui-autocomplete-results-header"},Ne={key:1,class:"nui-autocomplete-results-footer"},Re=W({__name:"BaseAutocomplete",props:{modelValue:{default:void 0},items:{default:()=>[]},shape:{default:void 0},label:{default:""},labelFloat:{type:Boolean},icon:{default:void 0},i18n:{default:()=>({pending:"Loading ...",empty:"Nothing found."})},placeholder:{default:""},error:{type:[String,Boolean],default:""},size:{default:"md"},contrast:{default:"default"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},clearValue:{default:void 0},clearIcon:{default:"lucide:x"},chipClearIcon:{default:"lucide:x"},dropdownIcon:{default:"lucide:chevron-down"},dropdown:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},displayValue:{type:Function,default:_=>_},filterDebounce:{default:0},filterItems:{type:Function,default:(_,o)=>!_||!o?o??[]:o.filter(B=>typeof B!="string"?!1:B?.toLowerCase().includes(_.toLowerCase()))},classes:{default:()=>({})}},emits:["update:modelValue"],setup(_,{expose:o,emit:B}){const t=_,q=B,F=X(),$=w(()=>t.shape??F.nui.defaultShapes?.input),l=oe(t,"modelValue",q,{passive:!0}),f=P(t.items),u=Q(""),V=ne(u,t.filterDebounce),c=P(t.dropdown?t.items:[]),x=Q(!1),A=w(()=>u.value!==V.value),p=w(()=>x.value||A.value),z={straight:"",rounded:"nui-autocomplete-rounded",smooth:"nui-autocomplete-smooth",curved:"nui-autocomplete-curved",full:"nui-autocomplete-full"},L={sm:"nui-autocomplete-sm",md:"nui-autocomplete-md",lg:"nui-autocomplete-lg"},O={default:"nui-autocomplete-default","default-contrast":"nui-autocomplete-default-contrast",muted:"nui-autocomplete-muted","muted-contrast":"nui-autocomplete-muted-contrast"};ue("BaseAutocompleteContext",ie({selected:l,items:f,filteredItems:c,query:u,pending:p,clear:M,removeItem:N})),o({selected:l,filteredItems:c,query:u,pending:p,clear:M,removeItem:N}),ce(V,async a=>{x.value=!0;try{c.value=await t.filterItems(a,f.value)}catch(r){if(r?.name==="AbortError")return;throw r}finally{x.value=!1}});function M(){l.value=t.clearValue}const H=w(()=>l.value&&typeof l.value=="object"&&!Array.isArray(l.value)&&"icon"in l.value&&typeof l.value.icon=="string"?l.value.icon:t.icon);function U(a){return!!(a&&typeof a=="object"&&("name"in a&&typeof a.name=="string"||"text"in a&&typeof a.text=="string"||"media"in a&&typeof a.media=="string"||"icon"in a&&typeof a.icon=="string"))}function N(a){if(!Array.isArray(l.value)){l.value=t.clearValue;return}for(let r=l.value.length-1;r>=0;--r)l.value[r]==a&&l.value.splice(r,1)}return(a,r)=>{const S=Y,K=pe,Z=Ie;return s(),g(e(ge),{modelValue:e(l),"onUpdate:modelValue":r[2]||(r[2]=n=>de(l)?l.value=n:null),multiple:t.multiple,disabled:t.disabled,class:y(["nui-autocomplete",t.classes?.wrapper,L[t.size],O[t.contrast],e($)&&z[e($)],t.icon&&"nui-has-icon",t.labelFloat&&"nui-autocomplete-label-float",t.loading&&"nui-autocomplete-loading"]),as:"div"},{default:v(()=>["label"in a.$slots&&!a.labelFloat||t.label&&!t.labelFloat?(s(),g(e(J),{key:0,class:y(["nui-autocomplete-label",a.classes?.label])},{default:v(()=>[b(a.$slots,"label",k(I({query:e(u),filteredItems:e(c),pending:e(p),items:e(f)})),()=>[T(C(a.label),1)])]),_:3},8,["class"])):d("",!0),t.multiple?(s(),i("div",we,[Array.isArray(e(l))&&e(l).length>0?(s(),i("ul",Be,[(s(!0),i(j,null,G(e(l),n=>(s(),i("li",{key:String(n)},[h("div",$e,[T(C(t.displayValue(n))+" ",1),h("button",{type:"button",onClick:D=>N(n)},[m(S,{name:a.chipClearIcon,class:"nui-autocomplete-multiple-list-item-icon"},null,8,["name"])],8,Ce)])]))),128))])):d("",!0)])):d("",!0),h("div",Ve,[m(e(ve),{class:y(["nui-autocomplete-input",a.classes?.input]),"display-value":t.multiple?void 0:t.displayValue,placeholder:t.placeholder,disabled:t.disabled,onChange:r[0]||(r[0]=n=>u.value=n.target.value)},null,8,["class","display-value","placeholder","disabled"]),"label"in a.$slots&&t.labelFloat||t.label&&t.labelFloat?(s(),g(e(J),{key:0,class:y(["nui-label-float",t.classes?.label])},{default:v(()=>[b(a.$slots,"label",k(I({query:e(u),filteredItems:e(c),pending:e(p),items:e(f)})),()=>[T(C(t.label),1)])]),_:3},8,["class"])):d("",!0),e(H)?(s(),i("div",xe,[m(S,{name:e(H),class:"nui-autocomplete-icon-inner"},null,8,["name"])])):d("",!0),t.clearable&&e(l)?(s(),i("button",{key:2,type:"button",class:y(["nui-autocomplete-clear",[t.classes?.icon,t.dropdown&&"me-6"]]),onClick:M},[m(S,{name:t.clearIcon,class:"nui-autocomplete-clear-inner"},null,8,["name"])],2)):d("",!0),t.dropdown?(s(),g(e(ye),{key:3,class:"nui-autocomplete-clear"},{default:v(({open:n})=>[m(S,{name:t.dropdownIcon,class:y(["nui-autocomplete-clear-inner transition-transform duration-300",[t.classes?.icon,n&&"rotate-180"]])},null,8,["name","class"])]),_:1})):d("",!0),t.loading?(s(),i("div",Ae,[m(K,{class:y(["nui-placeload",t.icon&&"ms-6"])},null,8,["class"])])):d("",!0)]),t.error&&typeof t.error=="string"?(s(),i("span",Se,C(t.error),1)):d("",!0),m(e(re),{leave:"transition ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0",onAfterLeave:r[1]||(r[1]=n=>u.value="")},{default:v(()=>[m(e(he),{as:"div",class:"nui-autocomplete-results"},{default:v(()=>[e(c).length===0&&e(p)?(s(),i("div",qe,[b(a.$slots,"pending",k(I({query:e(u),filteredItems:e(c),pending:e(p),items:e(f)})),()=>[h("span",Fe,C(t.i18n.pending),1)])])):e(c).length===0?(s(),i("div",ze,[b(a.$slots,"empty",k(I({query:e(u),filteredItems:e(c),pending:e(p),items:e(f)})),()=>[h("span",Le,C(t.i18n.empty),1)])])):(s(),i(j,{key:2},["start-item"in a.$slots?(s(),i("div",Me,[b(a.$slots,"start-item",k(I({query:e(u),filteredItems:e(c),pending:e(p),items:e(f)})))])):d("",!0),(s(!0),i(j,null,G(e(c),n=>(s(),g(e(_e),{key:String(n),class:"nui-autocomplete-results-item",as:"div",value:n},{default:v(({active:D,selected:R})=>[b(a.$slots,"item",k(I({query:e(u),filteredItems:e(c),pending:e(p),items:e(f),item:n,active:D,selected:R})),()=>[m(Z,{shape:e($),value:U(n)?n:{name:t.displayValue(n)},active:D,selected:R},null,8,["shape","value","active","selected"])])]),_:2},1032,["value"]))),128)),"end-item"in a.$slots?(s(),i("div",Ne,[b(a.$slots,"end-item",k(I({query:e(u),filteredItems:e(c),pending:e(p),items:e(f)})))])):d("",!0)],64))]),_:3})]),_:3})]),_:3},8,["modelValue","multiple","disabled","class"])}}});export{Ie as _,Re as a};
