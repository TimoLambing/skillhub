import{d as j,r as z,c as m,ap as A,aq as ie,ar as ne,as as se,at as _,ab as re,au as ue,av as W,H as J,L as ae,Z as Y,aw as de,ax as pe,ay as ce,az as H,aA as ve,F as G,aB as Z,aC as be,aD as ee,al as fe,a3 as me,R as N,ad as xe,aE as ge,aF as V,aG as y,a7 as he,a8 as ye,o as f,a as C,e as P,w as B,V as F,h as d,$ as q,f as Q,t as M,M as I,b as $,D as E,T as Se,E as Oe,C as _e,l as ke,a5 as Le,_ as Re,q as we}from"./entry.a9943f59.js";import{_ as Be}from"./BaseIconBox.vue.b471f921.js";import{_ as Te}from"./BaseAvatar.vue.aa11e2f4.js";import{x as Pe,a as R,u as Ve}from"./use-tracked-pointer.bfe38733.js";import{b as De}from"./use-resolve-button-type.e1ace5a8.js";import{d as Ie,e as ze}from"./use-controllable.89f6cb79.js";import{p as Ce}from"./use-text-value.b297714a.js";function Fe(a,b){return a===b}var Me=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(Me||{}),Ae=(a=>(a[a.Single=0]="Single",a[a.Multi=1]="Multi",a))(Ae||{}),$e=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))($e||{});function Ee(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let le=Symbol("ListboxContext");function K(a){let b=xe(le,null);if(b===null){let t=new Error(`<${a} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,K),t}return b}let Ne=j({name:"Listbox",emits:{"update:modelValue":a=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Fe},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:b,attrs:t,emit:k}){let e=z(1),c=z(null),x=z(null),g=z(null),p=z([]),o=z(""),l=z(null),v=z(1);function S(n=i=>i){let i=l.value!==null?p.value[l.value]:null,s=ge(n(p.value.slice()),L=>_(L.dataRef.domRef)),u=i?s.indexOf(i):null;return u===-1&&(u=null),{options:s,activeOptionIndex:u}}let h=m(()=>a.multiple?1:0),[w,D]=Ie(m(()=>a.modelValue),n=>k("update:modelValue",n),m(()=>a.defaultValue)),T=m(()=>w.value===void 0?A(h.value,{[1]:[],[0]:void 0}):w.value),r={listboxState:e,value:T,mode:h,compare(n,i){if(typeof a.by=="string"){let s=a.by;return n?.[s]===i?.[s]}return a.by(n,i)},orientation:m(()=>a.horizontal?"horizontal":"vertical"),labelRef:c,buttonRef:x,optionsRef:g,disabled:m(()=>a.disabled),options:p,searchQuery:o,activeOptionIndex:l,activationTrigger:v,closeListbox(){a.disabled||e.value!==1&&(e.value=1,l.value=null)},openListbox(){a.disabled||e.value!==0&&(e.value=0)},goToOption(n,i,s){if(a.disabled||e.value===1)return;let u=S(),L=Pe(n===R.Specific?{focus:R.Specific,id:i}:{focus:n},{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:U=>U.id,resolveDisabled:U=>U.dataRef.disabled});o.value="",l.value=L,v.value=s??1,p.value=u.options},search(n){if(a.disabled||e.value===1)return;let i=o.value!==""?0:1;o.value+=n.toLowerCase();let s=(l.value!==null?p.value.slice(l.value+i).concat(p.value.slice(0,l.value+i)):p.value).find(L=>L.dataRef.textValue.startsWith(o.value)&&!L.dataRef.disabled),u=s?p.value.indexOf(s):-1;u===-1||u===l.value||(l.value=u,v.value=1)},clearSearch(){a.disabled||e.value!==1&&o.value!==""&&(o.value="")},registerOption(n,i){let s=S(u=>[...u,{id:n,dataRef:i}]);p.value=s.options,l.value=s.activeOptionIndex},unregisterOption(n){let i=S(s=>{let u=s.findIndex(L=>L.id===n);return u!==-1&&s.splice(u,1),s});p.value=i.options,l.value=i.activeOptionIndex,v.value=1},theirOnChange(n){a.disabled||D(n)},select(n){a.disabled||D(A(h.value,{[0]:()=>n,[1]:()=>{let i=V(r.value.value).slice(),s=V(n),u=i.findIndex(L=>r.compare(s,V(L)));return u===-1?i.push(s):i.splice(u,1),i}}))}};ie([x,g],(n,i)=>{var s;r.closeListbox(),ne(i,se.Loose)||(n.preventDefault(),(s=_(x))==null||s.focus())},m(()=>e.value===0)),re(le,r),ue(m(()=>A(e.value,{[0]:W.Open,[1]:W.Closed})));let O=m(()=>{var n;return(n=_(x))==null?void 0:n.closest("form")});return J(()=>{ae([O],()=>{if(!O.value||a.defaultValue===void 0)return;function n(){r.theirOnChange(a.defaultValue)}return O.value.addEventListener("reset",n),()=>{var i;(i=O.value)==null||i.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,modelValue:i,disabled:s,form:u,...L}=a,U={open:e.value===0,disabled:s,value:T.value};return Y(G,[...n!=null&&T.value!=null?ze({[n]:T.value}).map(([X,oe])=>Y(de,pe({features:ce.Hidden,key:X,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:u,name:X,value:oe}))):[],H({ourProps:{},theirProps:{...t,...ve(L,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:U,slots:b,attrs:t,name:"Listbox"})])}}}),te=j({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-listbox-label-${Z()}`}},setup(a,{attrs:b,slots:t}){let k=K("ListboxLabel");function e(){var c;(c=_(k.buttonRef))==null||c.focus({preventScroll:!0})}return()=>{let c={open:k.listboxState.value===0,disabled:k.disabled.value},{id:x,...g}=a,p={id:x,ref:k.labelRef,onClick:e};return H({ourProps:p,theirProps:g,slot:c,attrs:b,slots:t,name:"ListboxLabel"})}}}),je=j({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${Z()}`}},setup(a,{attrs:b,slots:t,expose:k}){let e=K("ListboxButton");k({el:e.buttonRef,$el:e.buttonRef});function c(o){switch(o.key){case y.Space:case y.Enter:case y.ArrowDown:o.preventDefault(),e.openListbox(),N(()=>{var l;(l=_(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(R.First)});break;case y.ArrowUp:o.preventDefault(),e.openListbox(),N(()=>{var l;(l=_(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(R.Last)});break}}function x(o){switch(o.key){case y.Space:o.preventDefault();break}}function g(o){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),N(()=>{var l;return(l=_(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})})):(o.preventDefault(),e.openListbox(),Ee(()=>{var l;return(l=_(e.optionsRef))==null?void 0:l.focus({preventScroll:!0})})))}let p=De(m(()=>({as:a.as,type:b.type})),e.buttonRef);return()=>{var o,l;let v={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:S,...h}=a,w={ref:e.buttonRef,id:S,type:p.value,"aria-haspopup":"listbox","aria-controls":(o=_(e.optionsRef))==null?void 0:o.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(l=_(e.labelRef))==null?void 0:l.id,S].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:c,onKeyup:x,onClick:g};return H({ourProps:w,theirProps:h,slot:v,attrs:b,slots:t,name:"ListboxButton"})}}}),Ue=j({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${Z()}`}},setup(a,{attrs:b,slots:t,expose:k}){let e=K("ListboxOptions"),c=z(null);k({el:e.optionsRef,$el:e.optionsRef});function x(o){switch(c.value&&clearTimeout(c.value),o.key){case y.Space:if(e.searchQuery.value!=="")return o.preventDefault(),o.stopPropagation(),e.search(o.key);case y.Enter:if(o.preventDefault(),o.stopPropagation(),e.activeOptionIndex.value!==null){let l=e.options.value[e.activeOptionIndex.value];e.select(l.dataRef.value)}e.mode.value===0&&(e.closeListbox(),N(()=>{var l;return(l=_(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})}));break;case A(e.orientation.value,{vertical:y.ArrowDown,horizontal:y.ArrowRight}):return o.preventDefault(),o.stopPropagation(),e.goToOption(R.Next);case A(e.orientation.value,{vertical:y.ArrowUp,horizontal:y.ArrowLeft}):return o.preventDefault(),o.stopPropagation(),e.goToOption(R.Previous);case y.Home:case y.PageUp:return o.preventDefault(),o.stopPropagation(),e.goToOption(R.First);case y.End:case y.PageDown:return o.preventDefault(),o.stopPropagation(),e.goToOption(R.Last);case y.Escape:o.preventDefault(),o.stopPropagation(),e.closeListbox(),N(()=>{var l;return(l=_(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case y.Tab:o.preventDefault(),o.stopPropagation();break;default:o.key.length===1&&(e.search(o.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}let g=be(),p=m(()=>g!==null?(g.value&W.Open)===W.Open:e.listboxState.value===0);return()=>{var o,l,v,S;let h={open:e.listboxState.value===0},{id:w,...D}=a,T={"aria-activedescendant":e.activeOptionIndex.value===null||(o=e.options.value[e.activeOptionIndex.value])==null?void 0:o.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(S=(l=_(e.labelRef))==null?void 0:l.id)!=null?S:(v=_(e.buttonRef))==null?void 0:v.id,"aria-orientation":e.orientation.value,id:w,onKeydown:x,role:"listbox",tabIndex:0,ref:e.optionsRef};return H({ourProps:T,theirProps:D,slot:h,attrs:b,slots:t,features:ee.RenderStrategy|ee.Static,visible:p.value,name:"ListboxOptions"})}}}),He=j({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${Z()}`}},setup(a,{slots:b,attrs:t,expose:k}){let e=K("ListboxOption"),c=z(null);k({el:c,$el:c});let x=m(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===a.id:!1),g=m(()=>A(e.mode.value,{[0]:()=>e.compare(V(e.value.value),V(a.value)),[1]:()=>V(e.value.value).some(r=>e.compare(V(r),V(a.value)))})),p=m(()=>A(e.mode.value,{[1]:()=>{var r;let O=V(e.value.value);return((r=e.options.value.find(n=>O.some(i=>e.compare(V(i),V(n.dataRef.value)))))==null?void 0:r.id)===a.id},[0]:()=>g.value})),o=Ce(c),l=m(()=>({disabled:a.disabled,value:a.value,get textValue(){return o()},domRef:c}));J(()=>e.registerOption(a.id,l)),fe(()=>e.unregisterOption(a.id)),J(()=>{ae([e.listboxState,g],()=>{e.listboxState.value===0&&g.value&&A(e.mode.value,{[1]:()=>{p.value&&e.goToOption(R.Specific,a.id)},[0]:()=>{e.goToOption(R.Specific,a.id)}})},{immediate:!0})}),me(()=>{e.listboxState.value===0&&x.value&&e.activationTrigger.value!==0&&N(()=>{var r,O;return(O=(r=_(c))==null?void 0:r.scrollIntoView)==null?void 0:O.call(r,{block:"nearest"})})});function v(r){if(a.disabled)return r.preventDefault();e.select(a.value),e.mode.value===0&&(e.closeListbox(),N(()=>{var O;return(O=_(e.buttonRef))==null?void 0:O.focus({preventScroll:!0})}))}function S(){if(a.disabled)return e.goToOption(R.Nothing);e.goToOption(R.Specific,a.id)}let h=Ve();function w(r){h.update(r)}function D(r){h.wasMoved(r)&&(a.disabled||x.value||e.goToOption(R.Specific,a.id,0))}function T(r){h.wasMoved(r)&&(a.disabled||x.value&&e.goToOption(R.Nothing))}return()=>{let{disabled:r}=a,O={active:x.value,selected:g.value,disabled:r},{id:n,value:i,disabled:s,...u}=a,L={id:n,ref:c,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":g.value,disabled:void 0,onClick:v,onFocus:S,onPointerenter:w,onMouseenter:w,onPointermove:D,onMousemove:D,onPointerleave:T,onMouseleave:T};return H({ourProps:L,theirProps:u,slot:O,attrs:t,slots:b,name:"ListboxOption"})}}});const Ke={class:"nui-listbox-outer"},qe={class:"nui-listbox-button-inner"},Qe={class:"nui-listbox-chevron"},Ge={key:4,class:"nui-listbox-placeload"},We={class:"nui-listbox-option-inner"},Ze={key:2,class:"nui-listbox-selected-icon"},Je={key:1,class:"text-danger-600 mt-1 block font-sans text-[0.65rem] font-medium leading-none"},it=j({__name:"BaseListbox",props:{items:{},modelValue:{default:void 0},modelModifiers:{default:()=>({})},shape:{default:void 0},label:{default:""},labelFloat:{type:Boolean},loading:{type:Boolean,default:!1},error:{type:[String,Boolean],default:!1},disabled:{type:Boolean,default:!1},icon:{default:""},selectedIcon:{default:"lucide:check"},multiple:{type:Boolean,default:!1},multipleLabel:{type:[String,Function],default:()=>(a,b)=>a.length===0?"No elements selected":a.length>1?`${a.length} elements selected`:String(b?a?.[0]?.[b]:a?.[0])},placeholder:{default:""},size:{default:"md"},contrast:{default:"default"},properties:{default:()=>({})}},emits:["update:modelValue"],setup(a,{emit:b}){const t=a,k=he(),e=m(()=>t.shape??k.nui.defaultShapes?.input),c={straight:"",rounded:"nui-listbox-rounded",smooth:"nui-listbox-smooth",curved:"nui-listbox-curved",full:"nui-listbox-full"},x={sm:"nui-listbox-sm",md:"nui-listbox-md",lg:"nui-listbox-lg"},g={default:"nui-listbox-default","default-contrast":"nui-listbox-default-contrast",muted:"nui-listbox-muted","muted-contrast":"nui-listbox-muted-contrast"},p=ye(t,"modelValue",b,{passive:!0}),o=m(()=>{if(!t.loading)return t.labelFloat?t.label:t.placeholder}),l=m(()=>{if(t.modelModifiers.prop&&t.properties.value){const v=t.properties.value;return t.items.find(S=>S[v]===p.value)}return p.value});return(v,S)=>{const h=ke,w=Be,D=Te,T=Le,r=Re,O=we;return f(),C("div",{class:E(["nui-listbox",[g[t.contrast],x[t.size],d(e)&&c[d(e)],t.error&&!t.loading&&"nui-listbox-error",t.loading&&"nui-listbox-loading",t.labelFloat&&"nui-listbox-label-float",t.icon&&"nui-has-icon"]])},[P(d(Ne),{modelValue:d(p),"onUpdate:modelValue":S[0]||(S[0]=n=>_e(p)?p.value=n:null),by:t.modelModifiers.prop?void 0:t.properties.value,multiple:t.multiple,disabled:t.disabled},{default:B(({open:n})=>["label"in v.$slots&&!t.labelFloat||t.label&&!t.labelFloat?(f(),F(d(te),{key:0,class:"nui-listbox-label"},{default:B(()=>[q(v.$slots,"label",{},()=>[Q(M(t.label),1)])]),_:3})):I("",!0),$("div",Ke,[P(d(je),{disabled:t.disabled,class:"nui-listbox-button"},{default:B(()=>[q(v.$slots,"listbox-button",{value:d(l),open:n},()=>[$("div",qe,[t.icon?(f(),F(w,{key:0,size:"xs",shape:"rounded",class:"nui-icon-box"},{default:B(()=>[P(h,{name:t.icon,class:"nui-icon-box-inner"},null,8,["name"])]),_:1})):I("",!0),Array.isArray(d(l))?(f(),C(G,{key:1},[d(l).length===0&&d(o)?(f(),C("div",{key:0,class:E(["nui-listbox-placeholder",t.loading&&"text-transparent select-none"])},M(d(o))+"azeaze ",3)):I("",!0),$("div",{class:E(["block truncate text-left",[t.loading&&"select-none text-transparent",d(l).length===0&&"text-muted-300 dark:text-muted-500"]])},M(typeof t.multipleLabel=="function"?t.multipleLabel(d(l),t.properties.label):t.multipleLabel),3)],64)):d(l)?(f(),C(G,{key:2},[t.properties.media&&d(l)[t.properties.media]?(f(),F(D,{key:0,src:d(l)[t.properties.media],size:"xs",class:"-ms-2 me-2"},null,8,["src"])):t.properties.icon&&d(l)[t.properties.icon]?(f(),F(w,{key:1,size:"xs",shape:"rounded",class:"-ms-2 me-2"},{default:B(()=>[P(h,{name:d(l)[t.properties.icon],class:"h-4 w-4"},null,8,["name"])]),_:1})):I("",!0),$("div",{class:E(["truncate text-left",t.loading&&"text-transparent select-none"])},M(t.properties.label?d(l)[t.properties.label]:t.properties.value?d(l)[t.properties.value]:d(l)),3)],64)):(f(),C("div",{key:3,class:E(["nui-listbox-placeholder",t.loading&&"text-transparent select-none"])},M(d(o)),3)),$("span",Qe,[P(h,{name:"lucide:chevron-down",class:E(["nui-listbox-chevron-inner",[n&&"rotate-180"]])},null,8,["class"])]),t.loading?(f(),C("div",Ge,[P(T,{class:"nui-placeload"})])):I("",!0)])])]),_:2},1032,["disabled"]),P(Se,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:B(()=>[P(d(Ue),{class:"nui-listbox-options"},{default:B(()=>[(f(!0),C(G,null,Oe(t.items,i=>(f(),F(d(He),{key:t.properties.value?i[t.properties.value]:i,value:t.modelModifiers.prop&&t.properties.value?i[t.properties.value]:i,as:"template"},{default:B(({active:s,selected:u})=>[$("li",{class:E(["nui-listbox-option group/nui-listbox-option",[s&&"nui-active"]])},[q(v.$slots,"listbox-item",{item:i,open:n,active:s,selected:u},()=>[t.properties.media&&i[t.properties.media]?(f(),F(D,{key:0,src:i[t.properties.media],size:"xs"},null,8,["src"])):t.properties.icon&&i[t.properties.icon]?(f(),F(w,{key:1,size:"sm",shape:"rounded"},{default:B(()=>[P(h,{name:i[t.properties.icon],class:"text-muted-400 group-hover/nui-listbox-option:text-primary-500 h-5 w-5 transition-colors duration-200"},null,8,["name"])]),_:2},1024)):I("",!0),$("div",We,[P(r,{as:"h4",weight:u?"semibold":"normal",size:"sm",class:"nui-listbox-heading"},{default:B(()=>[Q(M(t.properties.label?i[t.properties.label]:t.properties.value?i[t.properties.value]:i),1)]),_:2},1032,["weight"]),t.properties.sublabel&&i[t.properties.sublabel]?(f(),F(O,{key:0,size:"xs",class:"nui-listbox-text"},{default:B(()=>[Q(M(i[t.properties.sublabel]),1)]),_:2},1024)):I("",!0)]),u?(f(),C("span",Ze,[P(h,{name:v.selectedIcon,class:"nui-listbobx-selected-icon-inner"},null,8,["name"])])):I("",!0)])],2)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1024),"label"in v.$slots&&t.labelFloat||t.label&&t.labelFloat?(f(),F(d(te),{key:0,class:"nui-label-float"},{default:B(()=>[q(v.$slots,"label",{},()=>[Q(M(t.label),1)])]),_:3})):I("",!0),t.error&&typeof t.error=="string"?(f(),C("span",Je,M(t.error),1)):I("",!0)])]),_:3},8,["modelValue","by","multiple","disabled"])],2)}}});export{it as _};
