import{d as h,r as F,a8 as g,a9 as k,ab as B,v as D,o as V,a as y,$ as C,h as l,b as I,W as M}from"./entry.896af9cc.js";import{u as d}from"./file-preview.461f8287.js";const N={class:"group/nui-file-headless relative"},P=["id"],b=h({inheritAttrs:!1,__name:"BaseInputFileHeadless",props:{modelValue:{default:void 0},id:{default:void 0},filterFileDropped:{type:Function,default:()=>!0}},emits:["update:modelValue"],setup(c,{expose:m,emit:w}){const o=c,_=w,e=F(),a=g(o,"modelValue",_,{passive:!0}),r=k(()=>o.id),p=new WeakMap;function n(){e.value?.click()}function f(s){s.stopPropagation(),s.preventDefault();const t=s.dataTransfer,i=new DataTransfer;if(e.value&&t){for(const v of t.files)o.filterFileDropped(v)&&i.items.add(v);e.value.files=i.files,a.value=e.value.files}}function u(s){if(!s||!a.value||!e.value)return;const t=new DataTransfer;p.has(s)&&p.delete(s);for(const i of a.value)i!==s&&t.items.add(i);e.value.files=t.files,a.value=e.value.files}return B("BaseInputFileHeadlessContext",D({el:e,id:r,files:a,open:n,remove:u,preview:d,drop:f})),m({el:e,id:r,files:a,open:n,remove:u,preview:d,drop:f}),(s,t)=>(V(),y("div",N,[C(s.$slots,"default",{id:l(r),el:l(e),files:l(a),open:n,remove:u,preview:l(d),drop:f}),I("input",M({id:l(r),ref_key:"inputRef",ref:e,type:"file"},s.$attrs,{class:"hidden",onChange:t[0]||(t[0]=i=>a.value=i.target.files)}),null,16,P)]))}});export{b as _};
