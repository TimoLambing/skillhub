import{d as j,x as D,c as g,as as M,at as ie,au as ne,av as se,aw as k,al as re,ax as ue,ay as G,N as Y,R as ae,a4 as Z,az as de,aA as pe,aB as ce,aC as U,aD as ve,K as Q,aE as W,aF as be,aG as ee,am as fe,a9 as me,Y as E,aq as xe,aH as ge,aI as I,aJ as S,ad as he,ae as ye,o as x,e as C,g as V,w as T,a0 as A,j as p,a5 as q,h as J,s as F,S as z,f as $,J as N,T as Se,L as Oe,H as _e,n as ke,I as Le,ab as Re,_ as we,v as Be}from"./entry.5f5261f9.js";import{_ as Te}from"./BaseIconBox.vue.a1dfad38.js";import{x as Pe,a as w,u as Ve}from"./use-tracked-pointer.d4929d36.js";import{b as Ie}from"./use-resolve-button-type.8332da18.js";import{d as ze,e as De}from"./use-controllable.0f433840.js";import{p as Ce}from"./use-text-value.b50d60c5.js";function Ae(a,b){return a===b}var Fe=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(Fe||{}),Me=(a=>(a[a.Single=0]="Single",a[a.Multi=1]="Multi",a))(Me||{}),$e=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))($e||{});function Ne(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let le=Symbol("ListboxContext");function K(a){let b=xe(le,null);if(b===null){let t=new Error(`<${a} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,K),t}return b}let Ee=j({name:"Listbox",emits:{"update:modelValue":a=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ae},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(a,{slots:b,attrs:t,emit:R}){let e=D(1),c=D(null),h=D(null),y=D(null),f=D([]),l=D(""),o=D(null),d=D(1);function v(n=s=>s){let s=o.value!==null?f.value[o.value]:null,i=ge(n(f.value.slice()),m=>k(m.dataRef.domRef)),u=s?i.indexOf(s):null;return u===-1&&(u=null),{options:i,activeOptionIndex:u}}let O=g(()=>a.multiple?1:0),[L,P]=ze(g(()=>a.modelValue),n=>R("update:modelValue",n),g(()=>a.defaultValue)),B=g(()=>L.value===void 0?M(O.value,{1:[],0:void 0}):L.value),r={listboxState:e,value:B,mode:O,compare(n,s){if(typeof a.by=="string"){let i=a.by;return n?.[i]===s?.[i]}return a.by(n,s)},orientation:g(()=>a.horizontal?"horizontal":"vertical"),labelRef:c,buttonRef:h,optionsRef:y,disabled:g(()=>a.disabled),options:f,searchQuery:l,activeOptionIndex:o,activationTrigger:d,closeListbox(){a.disabled||e.value!==1&&(e.value=1,o.value=null)},openListbox(){a.disabled||e.value!==0&&(e.value=0)},goToOption(n,s,i){if(a.disabled||e.value===1)return;let u=v(),m=Pe(n===w.Specific?{focus:w.Specific,id:s}:{focus:n},{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:H=>H.id,resolveDisabled:H=>H.dataRef.disabled});l.value="",o.value=m,d.value=i??1,f.value=u.options},search(n){if(a.disabled||e.value===1)return;let s=l.value!==""?0:1;l.value+=n.toLowerCase();let i=(o.value!==null?f.value.slice(o.value+s).concat(f.value.slice(0,o.value+s)):f.value).find(m=>m.dataRef.textValue.startsWith(l.value)&&!m.dataRef.disabled),u=i?f.value.indexOf(i):-1;u===-1||u===o.value||(o.value=u,d.value=1)},clearSearch(){a.disabled||e.value!==1&&l.value!==""&&(l.value="")},registerOption(n,s){let i=v(u=>[...u,{id:n,dataRef:s}]);f.value=i.options,o.value=i.activeOptionIndex},unregisterOption(n){let s=v(i=>{let u=i.findIndex(m=>m.id===n);return u!==-1&&i.splice(u,1),i});f.value=s.options,o.value=s.activeOptionIndex,d.value=1},theirOnChange(n){a.disabled||P(n)},select(n){a.disabled||P(M(O.value,{0:()=>n,1:()=>{let s=I(r.value.value).slice(),i=I(n),u=s.findIndex(m=>r.compare(i,I(m)));return u===-1?s.push(i):s.splice(u,1),s}}))}};ie([h,y],(n,s)=>{var i;r.closeListbox(),ne(s,se.Loose)||(n.preventDefault(),(i=k(h))==null||i.focus())},g(()=>e.value===0)),re(le,r),ue(g(()=>M(e.value,{0:G.Open,1:G.Closed})));let _=g(()=>{var n;return(n=k(h))==null?void 0:n.closest("form")});return Y(()=>{ae([_],()=>{if(!_.value||a.defaultValue===void 0)return;function n(){r.theirOnChange(a.defaultValue)}return _.value.addEventListener("reset",n),()=>{var s;(s=_.value)==null||s.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,modelValue:s,disabled:i,form:u,...m}=a,H={open:e.value===0,disabled:i,value:B.value};return Z(Q,[...n!=null&&B.value!=null?De({[n]:B.value}).map(([X,oe])=>Z(de,pe({features:ce.Hidden,key:X,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:u,name:X,value:oe}))):[],U({ourProps:{},theirProps:{...t,...ve(m,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:H,slots:b,attrs:t,name:"Listbox"})])}}}),te=j({name:"ListboxLabel",props:{as:{type:[Object,String],default:"label"},id:{type:String,default:()=>`headlessui-listbox-label-${W()}`}},setup(a,{attrs:b,slots:t}){let R=K("ListboxLabel");function e(){var c;(c=k(R.buttonRef))==null||c.focus({preventScroll:!0})}return()=>{let c={open:R.listboxState.value===0,disabled:R.disabled.value},{id:h,...y}=a,f={id:h,ref:R.labelRef,onClick:e};return U({ourProps:f,theirProps:y,slot:c,attrs:b,slots:t,name:"ListboxLabel"})}}}),je=j({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${W()}`}},setup(a,{attrs:b,slots:t,expose:R}){let e=K("ListboxButton");R({el:e.buttonRef,$el:e.buttonRef});function c(l){switch(l.key){case S.Space:case S.Enter:case S.ArrowDown:l.preventDefault(),e.openListbox(),E(()=>{var o;(o=k(e.optionsRef))==null||o.focus({preventScroll:!0}),e.value.value||e.goToOption(w.First)});break;case S.ArrowUp:l.preventDefault(),e.openListbox(),E(()=>{var o;(o=k(e.optionsRef))==null||o.focus({preventScroll:!0}),e.value.value||e.goToOption(w.Last)});break}}function h(l){switch(l.key){case S.Space:l.preventDefault();break}}function y(l){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),E(()=>{var o;return(o=k(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})})):(l.preventDefault(),e.openListbox(),Ne(()=>{var o;return(o=k(e.optionsRef))==null?void 0:o.focus({preventScroll:!0})})))}let f=Ie(g(()=>({as:a.as,type:b.type})),e.buttonRef);return()=>{var l,o;let d={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:v,...O}=a,L={ref:e.buttonRef,id:v,type:f.value,"aria-haspopup":"listbox","aria-controls":(l=k(e.optionsRef))==null?void 0:l.id,"aria-expanded":e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(o=k(e.labelRef))==null?void 0:o.id,v].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:c,onKeyup:h,onClick:y};return U({ourProps:L,theirProps:O,slot:d,attrs:b,slots:t,name:"ListboxButton"})}}}),He=j({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${W()}`}},setup(a,{attrs:b,slots:t,expose:R}){let e=K("ListboxOptions"),c=D(null);R({el:e.optionsRef,$el:e.optionsRef});function h(l){switch(c.value&&clearTimeout(c.value),l.key){case S.Space:if(e.searchQuery.value!=="")return l.preventDefault(),l.stopPropagation(),e.search(l.key);case S.Enter:if(l.preventDefault(),l.stopPropagation(),e.activeOptionIndex.value!==null){let o=e.options.value[e.activeOptionIndex.value];e.select(o.dataRef.value)}e.mode.value===0&&(e.closeListbox(),E(()=>{var o;return(o=k(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})}));break;case M(e.orientation.value,{vertical:S.ArrowDown,horizontal:S.ArrowRight}):return l.preventDefault(),l.stopPropagation(),e.goToOption(w.Next);case M(e.orientation.value,{vertical:S.ArrowUp,horizontal:S.ArrowLeft}):return l.preventDefault(),l.stopPropagation(),e.goToOption(w.Previous);case S.Home:case S.PageUp:return l.preventDefault(),l.stopPropagation(),e.goToOption(w.First);case S.End:case S.PageDown:return l.preventDefault(),l.stopPropagation(),e.goToOption(w.Last);case S.Escape:l.preventDefault(),l.stopPropagation(),e.closeListbox(),E(()=>{var o;return(o=k(e.buttonRef))==null?void 0:o.focus({preventScroll:!0})});break;case S.Tab:l.preventDefault(),l.stopPropagation();break;default:l.key.length===1&&(e.search(l.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}let y=be(),f=g(()=>y!==null?(y.value&G.Open)===G.Open:e.listboxState.value===0);return()=>{var l,o,d,v;let O={open:e.listboxState.value===0},{id:L,...P}=a,B={"aria-activedescendant":e.activeOptionIndex.value===null||(l=e.options.value[e.activeOptionIndex.value])==null?void 0:l.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(v=(o=k(e.labelRef))==null?void 0:o.id)!=null?v:(d=k(e.buttonRef))==null?void 0:d.id,"aria-orientation":e.orientation.value,id:L,onKeydown:h,role:"listbox",tabIndex:0,ref:e.optionsRef};return U({ourProps:B,theirProps:P,slot:O,attrs:b,slots:t,features:ee.RenderStrategy|ee.Static,visible:f.value,name:"ListboxOptions"})}}}),Ue=j({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${W()}`}},setup(a,{slots:b,attrs:t,expose:R}){let e=K("ListboxOption"),c=D(null);R({el:c,$el:c});let h=g(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===a.id:!1),y=g(()=>M(e.mode.value,{0:()=>e.compare(I(e.value.value),I(a.value)),1:()=>I(e.value.value).some(r=>e.compare(I(r),I(a.value)))})),f=g(()=>M(e.mode.value,{1:()=>{var r;let _=I(e.value.value);return((r=e.options.value.find(n=>_.some(s=>e.compare(I(s),I(n.dataRef.value)))))==null?void 0:r.id)===a.id},0:()=>y.value})),l=Ce(c),o=g(()=>({disabled:a.disabled,value:a.value,get textValue(){return l()},domRef:c}));Y(()=>e.registerOption(a.id,o)),fe(()=>e.unregisterOption(a.id)),Y(()=>{ae([e.listboxState,y],()=>{e.listboxState.value===0&&y.value&&M(e.mode.value,{1:()=>{f.value&&e.goToOption(w.Specific,a.id)},0:()=>{e.goToOption(w.Specific,a.id)}})},{immediate:!0})}),me(()=>{e.listboxState.value===0&&h.value&&e.activationTrigger.value!==0&&E(()=>{var r,_;return(_=(r=k(c))==null?void 0:r.scrollIntoView)==null?void 0:_.call(r,{block:"nearest"})})});function d(r){if(a.disabled)return r.preventDefault();e.select(a.value),e.mode.value===0&&(e.closeListbox(),E(()=>{var _;return(_=k(e.buttonRef))==null?void 0:_.focus({preventScroll:!0})}))}function v(){if(a.disabled)return e.goToOption(w.Nothing);e.goToOption(w.Specific,a.id)}let O=Ve();function L(r){O.update(r)}function P(r){O.wasMoved(r)&&(a.disabled||h.value||e.goToOption(w.Specific,a.id,0))}function B(r){O.wasMoved(r)&&(a.disabled||h.value&&e.goToOption(w.Nothing))}return()=>{let{disabled:r}=a,_={active:h.value,selected:y.value,disabled:r},{id:n,value:s,disabled:i,...u}=a,m={id:n,ref:c,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":y.value,disabled:void 0,onClick:d,onFocus:v,onPointerenter:L,onMouseenter:L,onPointermove:P,onMousemove:P,onPointerleave:B,onMouseleave:B};return U({ourProps:m,theirProps:u,slot:_,attrs:t,slots:b,name:"ListboxOption"})}}});const Ke={class:"nui-listbox-outer"},qe={class:"nui-listbox-button-inner"},Je={class:"nui-listbox-chevron"},Qe={key:4,class:"nui-listbox-placeload"},Ge={class:"nui-listbox-option-inner"},We={key:2,class:"nui-listbox-selected-icon"},Ye={key:1,class:"text-danger-600 mt-1 block font-sans text-[0.65rem] font-medium leading-none"},ot=j({__name:"BaseListbox",props:{items:{},modelValue:{default:void 0},modelModifiers:{default:()=>({})},shape:{default:void 0},label:{default:""},labelFloat:{type:Boolean},loading:{type:Boolean,default:!1},error:{type:[String,Boolean],default:!1},disabled:{type:Boolean,default:!1},icon:{default:""},selectedIcon:{default:"lucide:check"},multiple:{type:Boolean,default:!1},multipleLabel:{type:[String,Function],default:()=>(a,b)=>a.length===0?"No elements selected":a.length>1?`${a.length} elements selected`:String(b?a?.[0]?.[b]:a?.[0])},placeholder:{default:""},size:{default:"md"},contrast:{default:"default"},properties:{default:()=>({})}},emits:["update:modelValue"],setup(a,{emit:b}){const t=a,R=b,e=he(),c=g(()=>t.shape??e.nui.defaultShapes?.input),h={straight:"",rounded:"nui-listbox-rounded",smooth:"nui-listbox-smooth",curved:"nui-listbox-curved",full:"nui-listbox-full"},y={sm:"nui-listbox-sm",md:"nui-listbox-md",lg:"nui-listbox-lg"},f={default:"nui-listbox-default","default-contrast":"nui-listbox-default-contrast",muted:"nui-listbox-muted","muted-contrast":"nui-listbox-muted-contrast"},l=ye(t,"modelValue",R,{passive:!0}),o=g(()=>{if(!t.loading)return t.labelFloat?t.label:t.placeholder}),d=g(()=>{if(t.modelModifiers.prop&&t.properties.value){const v=t.properties.value;return t.items.find(O=>O[v]===l.value)}return l.value});return(v,O)=>{const L=ke,P=Te,B=Le,r=Re,_=we,n=Be;return x(),C("div",{class:N(["nui-listbox",[f[t.contrast],y[t.size],p(c)&&h[p(c)],t.error&&!t.loading&&"nui-listbox-error",t.loading&&"nui-listbox-loading",t.labelFloat&&"nui-listbox-label-float",t.icon&&"nui-has-icon"]])},[V(p(Ee),{modelValue:p(l),"onUpdate:modelValue":O[0]||(O[0]=s=>_e(l)?l.value=s:null),by:t.modelModifiers.prop?void 0:t.properties.value,multiple:t.multiple,disabled:t.disabled},{default:T(({open:s})=>["label"in v.$slots&&!t.labelFloat||t.label&&!t.labelFloat?(x(),A(p(te),{key:0,class:"nui-listbox-label"},{default:T(()=>[q(v.$slots,"label",{},()=>[J(F(t.label),1)])]),_:3})):z("",!0),$("div",Ke,[V(p(je),{disabled:t.disabled,class:"nui-listbox-button"},{default:T(()=>[q(v.$slots,"listbox-button",{value:p(d),open:s},()=>[$("div",qe,[t.icon?(x(),A(P,{key:0,size:"xs",shape:"rounded",class:"nui-icon-box"},{default:T(()=>[V(L,{name:t.icon,class:"nui-icon-box-inner"},null,8,["name"])]),_:1})):z("",!0),Array.isArray(p(d))?(x(),C(Q,{key:1},[p(d).length===0&&p(o)?(x(),C("div",{key:0,class:N(["nui-listbox-placeholder",t.loading&&"text-transparent select-none"])},F(p(o))+"azeaze ",3)):z("",!0),$("div",{class:N(["block truncate text-left",[t.loading&&"select-none text-transparent",p(d).length===0&&"text-muted-300 dark:text-muted-500"]])},F(typeof t.multipleLabel=="function"?t.multipleLabel(p(d),t.properties.label):t.multipleLabel),3)],64)):p(d)?(x(),C(Q,{key:2},[t.properties.media&&p(d)[t.properties.media]?(x(),A(B,{key:0,src:p(d)[t.properties.media],size:"xs",class:"-ms-2 me-2"},null,8,["src"])):t.properties.icon&&p(d)[t.properties.icon]?(x(),A(P,{key:1,size:"xs",shape:"rounded",class:"-ms-2 me-2"},{default:T(()=>[V(L,{name:p(d)[t.properties.icon],class:"h-4 w-4"},null,8,["name"])]),_:1})):z("",!0),$("div",{class:N(["truncate text-left",t.loading&&"text-transparent select-none"])},F(t.properties.label?p(d)[t.properties.label]:t.properties.value?p(d)[t.properties.value]:p(d)),3)],64)):(x(),C("div",{key:3,class:N(["nui-listbox-placeholder",t.loading&&"text-transparent select-none"])},F(p(o)),3)),$("span",Je,[V(L,{name:"lucide:chevron-down",class:N(["nui-listbox-chevron-inner",[s&&"rotate-180"]])},null,8,["class"])]),t.loading?(x(),C("div",Qe,[V(r,{class:"nui-placeload"})])):z("",!0)])])]),_:2},1032,["disabled"]),V(Se,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:T(()=>[V(p(He),{class:"nui-listbox-options"},{default:T(()=>[(x(!0),C(Q,null,Oe(t.items,i=>(x(),A(p(Ue),{key:t.properties.value?i[t.properties.value]:i,value:t.modelModifiers.prop&&t.properties.value?i[t.properties.value]:i,as:"template"},{default:T(({active:u,selected:m})=>[$("li",{class:N(["nui-listbox-option group/nui-listbox-option",[u&&"nui-active"]])},[q(v.$slots,"listbox-item",{item:i,open:s,active:u,selected:m},()=>[t.properties.media&&i[t.properties.media]?(x(),A(B,{key:0,src:i[t.properties.media],size:"xs"},null,8,["src"])):t.properties.icon&&i[t.properties.icon]?(x(),A(P,{key:1,size:"sm",shape:"rounded"},{default:T(()=>[V(L,{name:i[t.properties.icon],class:"text-muted-400 group-hover/nui-listbox-option:text-primary-500 h-5 w-5 transition-colors duration-200"},null,8,["name"])]),_:2},1024)):z("",!0),$("div",Ge,[V(_,{as:"h4",weight:m?"semibold":"normal",size:"sm",class:"nui-listbox-heading"},{default:T(()=>[J(F(t.properties.label?i[t.properties.label]:t.properties.value?i[t.properties.value]:i),1)]),_:2},1032,["weight"]),t.properties.sublabel&&i[t.properties.sublabel]?(x(),A(n,{key:0,size:"xs",class:"nui-listbox-text"},{default:T(()=>[J(F(i[t.properties.sublabel]),1)]),_:2},1024)):z("",!0)]),m?(x(),C("span",We,[V(L,{name:v.selectedIcon,class:"nui-listbobx-selected-icon-inner"},null,8,["name"])])):z("",!0)])],2)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1024),"label"in v.$slots&&t.labelFloat||t.label&&t.labelFloat?(x(),A(p(te),{key:0,class:"nui-label-float"},{default:T(()=>[q(v.$slots,"label",{},()=>[J(F(t.label),1)])]),_:3})):z("",!0),t.error&&typeof t.error=="string"?(x(),C("span",Ye,F(t.error),1)):z("",!0)])]),_:3},8,["modelValue","by","multiple","disabled"])],2)}}});export{ot as _};
