import{d as Y,c as I,r as C,L as J,bs as ee,o as f,a as b,b as e,e as a,w as o,g as A,h as n,C as ae,t as oe,M as le,f as _,_ as te,j as se,l as ne,n as de,q as ie,s as re,k as ce}from"./entry.eb08ef52.js";import{_ as me}from"./BaseButtonAction.vue.0e721c06.js";import{_ as ue}from"./BaseFullscreenDropfile.vue.774afdd3.js";import{_ as pe}from"./BaseButtonIcon.vue.cc3a31b0.js";import{_ as _e}from"./BaseInputFileHeadless.vue.8d9c4ace.js";import{_ as ve}from"./BaseRadioHeadless.vue.b32a128f.js";import{_ as he}from"./BaseSelect.vue.ce8f534e.js";import{_ as fe}from"./BaseListbox.vue.92fdc8b7.js";import{_ as be}from"./BaseTextarea.vue.d56d7d3a.js";import{_ as ge}from"./BaseCheckbox.vue.dadaecc3.js";import{u as ye}from"./toaster.5d47fc20.js";import{z as t,u as xe,a as we,F as u,t as Be}from"./vee-validate.esm.8c1dfe96.js";import"./file-preview.99aef7e3.js";import"./IconChevronDown.376c0a35.js";import"./BaseIconBox.vue.df16724f.js";import"./BaseAvatar.vue.4182ff10.js";import"./use-tracked-pointer.e94e2b1a.js";import"./use-resolve-button-type.9efefc8b.js";import"./use-controllable.0d5dc1b1.js";import"./use-text-value.fec5e005.js";import"./IconCheck.45c84c2a.js";const Ee={class:"mb-4 flex flex-col justify-between md:flex-row md:items-center"},Ue={class:"ltablet:max-w-full flex max-w-[425px] flex-col items-center gap-4 text-center md:flex-row md:text-left lg:max-w-full"},ke=e("span",null,"New company",-1),Ie=e("span",{class:"text-muted-500"}," Create a new company record ",-1),Re={class:"mt-4 flex items-center justify-center gap-2 md:mt-0 md:justify-start"},Ve=e("span",null,"Cancel",-1),Me={shape:"curved",class:"bg-muted-50 dark:bg-muted-800/60 space-y-8 p-10"},Ce={class:"mx-auto flex w-full max-w-[410px] flex-col"},Ae={class:"relative mb-5 flex flex-col items-center justify-center gap-4"},Te={class:"relative h-20 w-20"},Se=["src"],$e=["src"],ze={key:2,class:"absolute bottom-0 end-0 z-20"},De={key:3,class:"absolute bottom-0 end-0 z-20"},Ne={class:"relative","data-nui-tooltip":"Upload image"},Oe={key:0,class:"text-danger-600 inline-block font-sans text-[.8rem]"},je={class:"grid grid-cols-12 gap-4"},Fe={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},Ke={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},Pe={class:"col-span-12"},Qe={class:"mb-6 mt-4"},Le=e("label",{class:"nui-label pb-2 text-[0.825rem]"},"Company type",-1),Ze={class:"ptablet:grid-cols-2 ltablet:grid-cols-3 grid gap-4 lg:grid-cols-3"},Ge={class:"flex w-full flex-col items-center gap-2 text-center"},He=e("div",{class:"child text-muted-300 absolute right-2 top-2 ms-auto"},[e("div",{class:"h-2 w-2 rounded-full bg-current"})],-1),We={class:"flex w-full flex-col items-center gap-2 text-center"},Xe=e("div",{class:"child text-muted-300 absolute right-2 top-2 ms-auto"},[e("div",{class:"h-2 w-2 rounded-full bg-current"})],-1),qe={class:"flex w-full flex-col items-center gap-2 text-center"},Ye=e("div",{class:"child text-muted-300 absolute right-2 top-2 ms-auto"},[e("div",{class:"h-2 w-2 rounded-full bg-current"})],-1),Je={shape:"curved",class:"w-full space-y-8 p-10"},ea={class:"mx-auto w-full max-w-[410px]"},aa={class:"grid grid-cols-12 gap-4"},oa={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},la=e("option",{value:"",hidden:""},null,-1),ta=e("option",{value:"0 - 250K"},"0 - 250K",-1),sa=e("option",{value:"250K - 500K"},"250K - 500K",-1),na=e("option",{value:"500K - 1M"},"500K - 1M",-1),da=e("option",{value:"1M - 5M"},"1M - 5M",-1),ia=e("option",{value:"10M+"},"10M+",-1),ra={class:"ltablet:col-span-6 col-span-12 lg:col-span-6"},ca=e("option",{value:"",hidden:""},null,-1),ma=e("option",{value:"1-10 employees"},"1-10 employees",-1),ua=e("option",{value:"10-50 employees"},"10-50 employees",-1),pa=e("option",{value:"50-100 employees"},"50-100 employees",-1),_a=e("option",{value:"100+ employees"},"100+ employees",-1),va={class:"ltablet:col-span-8 col-span-12 lg:col-span-8"},ha={class:"ltablet:col-span-4 col-span-12 lg:col-span-4"},fa=e("option",{value:"",hidden:""},null,-1),ba=e("option",{value:"active"},"Active",-1),ga=e("option",{value:"inactive"},"Inactive",-1),ya={class:"col-span-12"},xa={class:"col-span-12"},wa={class:"mt-5 flex flex-col-reverse text-right md:block md:space-x-3"},Ba=1e6,Wa=Y({__name:"form-1",setup(Ea){const T=[{id:1,name:"Clarissa Perez",text:"Sales Manager",media:"/img/avatars/19.svg"},{id:2,name:"Aaron Splatter",text:"Project Manager",media:"/img/avatars/16.svg"},{id:3,name:"Mike Miller",text:"UI/UX Designer",media:"/img/avatars/3.svg"},{id:4,name:"Benedict Kessler",text:"Mobile Developer",media:"/img/avatars/22.svg"},{id:5,name:"Maya Rosselini",text:"Product Manager",media:"/img/avatars/2.svg"}],p={NAME_REQUIRED:"Company name can't be empty",EMAIL_REQUIRED:"Email address can't be empty",OPTION_REQUIRED:"Please select an option",MANAGER_REQUIRED:"Please select a manager",STATUS_REQUIRED:"Pick a status",AVATAR_TOO_BIG:"Avatar size must be less than 1MB"},S=t.object({avatar:t.custom(c=>c instanceof File).nullable(),company:t.object({name:t.string().min(1,p.NAME_REQUIRED),email:t.string().min(1,p.EMAIL_REQUIRED),website:t.string().optional(),status:t.union([t.literal("active"),t.literal("inactive")]).nullable(),employees:t.union([t.literal("1-10 employees"),t.literal("10-50 employees"),t.literal("50-100 employees"),t.literal("100+ employees")]).nullable(),manager:t.object({id:t.number(),name:t.string(),text:t.string(),media:t.string()}).nullable(),income:t.union([t.literal("0 - 250K"),t.literal("250K - 500K"),t.literal("500K - 1M"),t.literal("1M - 5M"),t.literal("10M+")]).nullable(),notes:t.string().optional(),privateRecord:t.boolean()})}).superRefine((c,r)=>{c.avatar&&c.avatar.size>Ba&&r.addIssue({code:t.ZodIssueCode.custom,message:p.AVATAR_TOO_BIG,path:["avatar"]}),c.company.income||r.addIssue({code:t.ZodIssueCode.custom,message:p.OPTION_REQUIRED,path:["company.income"]}),c.company.employees||r.addIssue({code:t.ZodIssueCode.custom,message:p.OPTION_REQUIRED,path:["company.employees"]}),c.company.status||r.addIssue({code:t.ZodIssueCode.custom,message:p.STATUS_REQUIRED,path:["company.status"]}),c.company.manager||r.addIssue({code:t.ZodIssueCode.custom,message:p.MANAGER_REQUIRED,path:["company.manager"]})}),$=Be(S),z=I(()=>({avatar:null,company:{name:"",email:"",website:"",type:"",income:null,employees:null,manager:null,status:null,notes:"",privateRecord:!1}})),D=I(()=>"/img/avatars/company.svg"),{handleSubmit:N,isSubmitting:m,setFieldError:O,meta:j,values:Ua,errors:F,resetForm:K,setFieldValue:P,setErrors:ka}=xe({validationSchema:$,initialValues:z}),y=C(!1);I(()=>Object.keys(F.value).length);const g=C(null),R=we("avatar");J(g,c=>{const r=c?.item(0)||null;P("avatar",r)}),ee(()=>{if(j.value.dirty)return confirm("You have unsaved changes. Are you sure you want to leave?")});const x=ye(),V=N(async c=>{y.value=!1,console.log("company-create-success",c);try{await new Promise((r,v)=>{c.company.name==="Airbnb"&&setTimeout(()=>v(new Error("Fake backend validation error")),2e3),setTimeout(r,4e3)}),x.clearAll(),x.show({title:"Success",message:"Record has been created!",color:"success",icon:"ph:check",closable:!0})}catch(r){r.message==="Fake backend validation error"&&(O("company.name","This name is not allowed"),document.documentElement.scrollTo({top:0,behavior:"smooth"}),x.clearAll(),x.show({title:"Oops!",message:"Please review the errors in the form",color:"danger",icon:"lucide:alert-triangle",closable:!0}));return}K(),document.documentElement.scrollTo({top:0,behavior:"smooth"}),y.value=!0,setTimeout(()=>{y.value=!1},3e3)},c=>{y.value=!1,console.log("company-create-error",c),document.documentElement.scrollTo({top:0,behavior:"smooth"})});return(c,r)=>{const v=te,Q=se,h=ne,L=me,Z=ue,M=pe,G=_e,B=de,E=ie,w=re,U=ve,k=he,H=fe,W=be,X=ge,q=ce;return f(),b("div",null,[e("div",Ee,[e("div",Ue,[e("div",null,[a(v,{as:"h2",size:"xl",weight:"light",lead:"tight",class:"text-muted-800 dark:text-white"},{default:o(()=>[ke]),_:1}),a(Q,{size:"sm"},{default:o(()=>[Ie]),_:1})])]),e("div",Re,[a(L,{onClick:r[0]||(r[0]=A(l=>c.$router.back(),["prevent"]))},{default:o(()=>[a(h,{name:"lucide:arrow-left",class:"h-3 w-3"}),Ve]),_:1})])]),a(w,null,{default:o(()=>[e("form",{method:"POST",action:"",class:"divide-muted-200 dark:divide-muted-700 grid divide-x sm:grid-cols-2",onSubmit:r[3]||(r[3]=A((...l)=>n(V)&&n(V)(...l),["prevent"]))},[e("div",Me,[e("div",Ce,[e("div",null,[e("div",null,[e("div",Ae,[a(Z,{icon:"ph:image-duotone","filter-file-dropped":l=>l.type.startsWith("image"),onDrop:r[1]||(r[1]=l=>{g.value=l})},null,8,["filter-file-dropped"]),a(G,{accept:"image/*",modelValue:n(g),"onUpdate:modelValue":r[2]||(r[2]=l=>ae(g)?g.value=l:null)},{default:o(({open:l,remove:d,preview:i,files:s})=>[e("div",Te,[s?.length&&s.item(0)?(f(),b("img",{key:0,src:i(s.item(0)).value,alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-20 w-20 rounded-full object-cover object-center"},null,8,Se)):(f(),b("img",{key:1,src:n(D),alt:"Upload preview",class:"bg-muted-200 dark:bg-muted-700/60 h-20 w-20 rounded-full object-cover object-center dark:invert"},null,8,$e)),s?.length&&s.item(0)?(f(),b("div",ze,[a(M,{size:"sm",shape:"full",onClick:Ia=>d(s.item(0)),"data-nui-tooltip":"Remove image",class:"scale-90"},{default:o(()=>[a(h,{name:"lucide:x",class:"h-4 w-4"})]),_:2},1032,["onClick"])])):(f(),b("div",De,[e("div",Ne,[a(M,{size:"sm",shape:"full",onClick:l},{default:o(()=>[a(h,{name:"lucide:plus",class:"h-4 w-4"})]),_:2},1032,["onClick"])])]))])]),_:1},8,["modelValue"]),n(R)?(f(),b("div",Oe,oe(n(R)),1)):le("",!0)]),e("div",je,[e("div",Fe,[a(n(u),{name:"company.name"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(B,{label:"Company Name",placeholder:"Ex: Acme Inc.","model-value":l.value,error:d,disabled:n(m),type:"text","onUpdate:modelValue":i,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Ke,[a(n(u),{name:"company.email"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(B,{label:"Company Email",placeholder:"Ex: hello@acme.co","model-value":l.value,error:d,disabled:n(m),type:"email","onUpdate:modelValue":i,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",Pe,[a(n(u),{name:"company.website"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(B,{icon:"lucide:globe",label:"Company website",placeholder:"Ex: https://acme.co","model-value":l.value,error:d,disabled:n(m),type:"text","onUpdate:modelValue":i,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})])]),e("div",Qe,[Le,e("div",Ze,[a(n(u),{name:"company.type"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(U,{value:"team_member_1","model-value":l.value,error:d,disabled:n(m),"onUpdate:modelValue":i,onBlur:s},{default:o(()=>[a(w,{shape:"rounded",class:"text-muted-400 peer-checked:!border-primary-500 peer-checked:[&_.child]:!text-primary-500 relative border-2 px-2 py-4 grayscale peer-checked:grayscale-0"},{default:o(()=>[e("div",Ge,[a(h,{name:"ph:house-simple-duotone",class:"child mx-auto h-5 w-5"}),e("div",null,[a(v,{as:"h4",size:"sm",weight:"medium",lead:"none"},{default:o(()=>[_(" Solo ")]),_:1}),a(E,{size:"xs",class:"text-muted-400"},{default:o(()=>[_("Small company")]),_:1})]),He])]),_:1})]),_:2},1032,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1}),a(n(u),{name:"company.type"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(U,{value:"team_member_2","model-value":l.value,error:d,disabled:n(m),"onUpdate:modelValue":i,onBlur:s},{default:o(()=>[a(w,{shape:"rounded",class:"text-muted-400 peer-checked:!border-primary-500 peer-checked:[&_.child]:!text-primary-500 relative border-2 px-2 py-4 grayscale peer-checked:grayscale-0"},{default:o(()=>[e("div",We,[a(h,{name:"ph:storefront-duotone",class:"child mx-auto h-5 w-5"}),e("div",null,[a(v,{as:"h4",size:"sm",weight:"medium",lead:"none"},{default:o(()=>[_(" LLC ")]),_:1}),a(E,{size:"xs",class:"text-muted-400"},{default:o(()=>[_("Medium company")]),_:1})]),Xe])]),_:1})]),_:2},1032,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1}),a(n(u),{name:"company.type"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(U,{value:"team_member_3","model-value":l.value,error:d,disabled:n(m),"onUpdate:modelValue":i,onBlur:s},{default:o(()=>[a(w,{shape:"rounded",class:"text-muted-400 peer-checked:!border-primary-500 peer-checked:[&_.child]:!text-primary-500 relative border-2 px-2 py-4 grayscale peer-checked:grayscale-0"},{default:o(()=>[e("div",qe,[a(h,{name:"ph:buildings-duotone",class:"child mx-auto h-5 w-5"}),e("div",null,[a(v,{as:"h4",size:"sm",weight:"medium",lead:"none"},{default:o(()=>[_(" Corp ")]),_:1}),a(E,{size:"xs",class:"text-muted-400"},{default:o(()=>[_("Bigger company")]),_:1})]),Ye])]),_:1})]),_:2},1032,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})])])])])])]),e("div",Je,[e("div",ea,[e("div",aa,[e("div",oa,[a(n(u),{name:"company.income"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(k,{shape:"rounded",label:"Income","model-value":l.value,error:d,disabled:n(m),"onUpdate:modelValue":i,onBlur:s},{default:o(()=>[la,ta,sa,na,da,ia]),_:2},1032,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",ra,[a(n(u),{name:"company.employees"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(k,{shape:"rounded",label:"Employees","model-value":l.value,error:d,disabled:n(m),"onUpdate:modelValue":i,onBlur:s},{default:o(()=>[ca,ma,ua,pa,_a]),_:2},1032,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",va,[a(n(u),{name:"company.manager"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(H,{label:"Manager",items:T,properties:{value:"id",label:"name",sublabel:"text",media:"media"},"model-value":l.value,error:d,disabled:n(m),"onUpdate:modelValue":i,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",ha,[a(n(u),{name:"company.status"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(k,{shape:"rounded",label:"Status","model-value":l.value,error:d,disabled:n(m),"onUpdate:modelValue":i,onBlur:s},{default:o(()=>[fa,ba,ga]),_:2},1032,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",ya,[a(n(u),{name:"company.notes"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(W,{label:"Company notes",placeholder:"Write some notes...","model-value":l.value,error:d,disabled:n(m),"onUpdate:modelValue":i,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),e("div",xa,[a(n(u),{name:"company.privateRecord"},{default:o(({field:l,errorMessage:d,handleChange:i,handleBlur:s})=>[a(X,{label:"This record is private",shape:"rounded",color:"primary","model-value":l.value,error:d,disabled:n(m),"onUpdate:modelValue":i,onBlur:s},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})])]),e("div",wa,[a(q,{type:"submit",color:"primary",class:"!h-12 w-full sm:w-40"},{default:o(()=>[_(" Create Company ")]),_:1})])])])],32)]),_:1})])}}});export{Wa as default};
