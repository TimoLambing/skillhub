import{d as y,c as I,r as w,bs as V,o as M,a as F,e as a,w as i,b as r,g as x,h as e,f as D,n as k,k as L,s as Q}from"./entry.c326b3b9.js";import{_ as $}from"./BaseTextarea.vue.db9b6157.js";import{u as z}from"./toaster.178737fc.js";import{z as u,u as C,F as f,t as O}from"./vee-validate.esm.70badfd2.js";const P={class:"max-w-lg"},j={class:"grid grid-cols-12 gap-4"},G={class:"col-span-12 sm:col-span-6"},H={class:"col-span-12 sm:col-span-6"},J={class:"col-span-12"},X={class:"col-span-12"},Y={class:"col-span-12"},te=y({__name:"validation",setup(q){const p={FIRSTNAME_REQUIRED:"First name can't be empty",LASTNAME_REQUIRED:"Last name can't be empty",EMAIL_REQUIRED:"Enter a valid email address",MESSAGE_REQUIRED:"Message can't be empty"},E=u.object({firstName:u.string().min(1,p.FIRSTNAME_REQUIRED),lastName:u.string().min(1,p.LASTNAME_REQUIRED),email:u.string().email(p.EMAIL_REQUIRED),message:u.string().min(1,p.MESSAGE_REQUIRED)}),b=O(E),g=I(()=>({firstName:"",lastName:"",email:"",message:""})),{handleSubmit:R,isSubmitting:n,setFieldError:T,meta:N,values:K,errors:W,resetForm:S,setFieldValue:Z,setErrors:ee}=C({validationSchema:b,initialValues:g}),_=w(!1);V(()=>{if(N.value.dirty)return confirm("You have unsaved changes. Are you sure you want to leave?")});const v=z(),h=R(async m=>{_.value=!1,console.log("message-send-success",m);try{await new Promise((d,c)=>{m.firstName==="Hanzo"&&setTimeout(()=>c(new Error("Fake backend validation error")),2e3),setTimeout(d,4e3)}),v.clearAll(),v.show({title:"Success",message:"Message has been sent!",color:"success",icon:"ph:check",closable:!0})}catch(d){d.message==="Fake backend validation error"&&(T("firstName","This name is not allowed"),document.documentElement.scrollTo({top:0,behavior:"smooth"}),v.clearAll(),v.show({title:"Oops!",message:"Please review the errors in the form",color:"danger",icon:"lucide:alert-triangle",closable:!0}));return}S(),document.documentElement.scrollTo({top:0,behavior:"smooth"}),_.value=!0,setTimeout(()=>{_.value=!1},3e3)},m=>{_.value=!1,console.log("message-send-error",m),document.documentElement.scrollTo({top:0,behavior:"smooth"})});return(m,d)=>{const c=k,B=$,A=L,U=Q;return M(),F("div",P,[a(U,{class:"p-6"},{default:i(()=>[r("form",{action:"",method:"POST",onSubmit:d[0]||(d[0]=x((...s)=>e(h)&&e(h)(...s),["prevent"])),novalidate:""},[r("div",j,[r("div",G,[a(e(f),{name:"firstName"},{default:i(({field:s,errorMessage:o,handleChange:l,handleBlur:t})=>[a(c,{label:"First Name",placeholder:"ex: John","model-value":s.value,error:o,disabled:e(n),type:"text","onUpdate:modelValue":l,onBlur:t},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),r("div",H,[a(e(f),{name:"lastName"},{default:i(({field:s,errorMessage:o,handleChange:l,handleBlur:t})=>[a(c,{label:"Last Name",placeholder:"ex: Doe","model-value":s.value,error:o,disabled:e(n),type:"text","onUpdate:modelValue":l,onBlur:t},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),r("div",J,[a(e(f),{name:"email"},{default:i(({field:s,errorMessage:o,handleChange:l,handleBlur:t})=>[a(c,{type:"email",label:"Email Address",placeholder:"ex: johndoe@gmail.com","model-value":s.value,error:o,disabled:e(n),"onUpdate:modelValue":l,onBlur:t},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),r("div",X,[a(e(f),{name:"message"},{default:i(({field:s,errorMessage:o,handleChange:l,handleBlur:t})=>[a(B,{label:"Message",placeholder:"write your message...","model-value":s.value,error:o,disabled:e(n),"onUpdate:modelValue":l,onBlur:t},null,8,["model-value","error","disabled","onUpdate:modelValue","onBlur"])]),_:1})]),r("div",Y,[a(A,{type:"submit",class:"w-full",color:"primary",disabled:e(n),loading:e(n)},{default:i(()=>[D("Send Message")]),_:1},8,["disabled","loading"])])])],32)]),_:1})])}}});export{te as default};
