import{d as _,r as h,a8 as F,a9 as g,ab as k,v as B,o as D,a as V,$ as y,h as l,b as C,W as I}from"./entry.573a177d.js";import{u as d}from"./file-preview.97b6488c.js";const M={class:"group/nui-file-headless relative"},N=["id"],$=_({inheritAttrs:!1,__name:"BaseInputFileHeadless",props:{modelValue:{default:void 0},id:{default:void 0},filterFileDropped:{type:Function,default:()=>!0}},emits:["update:modelValue"],setup(c,{expose:m,emit:w}){const o=c,e=h(),s=F(o,"modelValue",w,{passive:!0}),r=g(()=>o.id),p=new WeakMap;function n(){e.value?.click()}function f(a){a.stopPropagation(),a.preventDefault();const t=a.dataTransfer,i=new DataTransfer;if(e.value&&t){for(const v of t.files)o.filterFileDropped(v)&&i.items.add(v);e.value.files=i.files,s.value=e.value.files}}function u(a){if(!a||!s.value||!e.value)return;const t=new DataTransfer;p.has(a)&&p.delete(a);for(const i of s.value)i!==a&&t.items.add(i);e.value.files=t.files,s.value=e.value.files}return k("BaseInputFileHeadlessContext",B({el:e,id:r,files:s,open:n,remove:u,preview:d,drop:f})),m({el:e,id:r,files:s,open:n,remove:u,preview:d,drop:f}),(a,t)=>(D(),V("div",M,[y(a.$slots,"default",{id:l(r),el:l(e),files:l(s),open:n,remove:u,preview:l(d),drop:f}),C("input",I({id:l(r),ref_key:"inputRef",ref:e,type:"file"},a.$attrs,{class:"hidden",onChange:t[0]||(t[0]=i=>s.value=i.target.files)}),null,16,N)]))}});export{$ as _};
