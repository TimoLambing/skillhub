import{d as W,a7 as X,c as w,ad as Z,aM as E,o as s,a as r,V as g,w as v,e as f,D as y,M as p,b as h,h as e,Q as ee,ak as te,l as Y,_ as ae,q as le,a8 as se,B as P,r as Q,aN as oe,ab as ne,v as ue,L as ie,$ as b,y as k,z as I,f as T,t as $,F as j,E as G,aO as re,C as ce,a5 as de}from"./entry.573a177d.js";import{_ as pe}from"./BaseAvatar.vue.09ce3770.js";import{_ as me}from"./BaseIconBox.vue.1e621469.js";import{W as J,Q as fe,G as ve,X as ye,Y as he,J as _e}from"./combobox.46c23122.js";const ge=["innerHTML"],be=["innerHTML"],ke=W({__name:"BaseAutocompleteItem",props:{value:{default:()=>({})},shape:{default:void 0},selectedIcon:{default:"lucide:check"},active:{type:Boolean},selected:{type:Boolean},mark:{default:"nui-mark"}},setup(_){const o=_,B=X(),t=w(()=>o.shape??B.nui.defaultShapes?.autocompleteItem),S={straight:"",rounded:"rounded-md",smooth:"rounded-lg",curved:"rounded-xl",full:"rounded-xl"},C=Z("BaseAutocompleteContext",{query:""}),l=w(()=>C.query),m=w(()=>o.mark),i=E(()=>o.value?.name,l,m),V=E(()=>o.value?.text,l,m);return(u,x)=>{const q=pe,d=Y,F=me,z=ae,L=le;return s(),r("div",{class:y(["flex cursor-pointer items-center p-2 transition-colors duration-300",[o.active?"bg-muted-100 dark:bg-muted-700":"",e(t)&&S[e(t)]]])},[o.value.media&&!o.value.icon?(s(),g(q,{key:0,src:o.value.media,size:"xs",class:"me-3"},null,8,["src"])):o.value.icon&&!o.value.media?(s(),g(F,{key:1,size:"sm",shape:"rounded",class:"me-1"},{default:v(()=>[f(d,{name:o.value.icon,class:y(["h-4 w-4",[o.selected?"text-primary-500":"text-muted-500"]])},null,8,["name","class"])]),_:1})):p("",!0),h("div",null,[f(z,{as:"h4",weight:o.selected?"semibold":"normal",size:"sm",class:"text-muted-800 dark:text-white"},{default:v(()=>[h("span",{innerHTML:e(i)},null,8,ge)]),_:1},8,["weight"]),u.value.text?(s(),g(L,{key:0,size:"xs",class:"text-muted-400"},{default:v(()=>[h("span",{innerHTML:e(V)},null,8,be)]),_:1})):p("",!0)]),ee(h("div",{class:y(["ms-auto flex items-center justify-center",[o.value.media&&"h-8 w-8",o.value.icon&&"h-8 w-8"]])},[f(d,{name:u.selectedIcon,class:"text-success-500 block h-4 w-4"},null,8,["name"])],2),[[te,o.selected]])],2)}}}),Ie={key:1,class:"nui-autocomplete-multiple"},we={key:0,class:"nui-autocomplete-multiple-list"},Be={class:"nui-autocomplete-multiple-list-item"},$e=["onClick"],Ce={class:"nui-autocomplete-outer"},Ve={key:1,class:"nui-autocomplete-icon"},xe={key:4,class:"nui-autocomplete-placeload"},Ae={key:2,class:"nui-autocomplete-error-text"},Se={key:0,class:"nui-autocomplete-results-placeholder"},qe={class:"nui-autocomplete-results-placeholder-text"},Fe={key:1,class:"nui-autocomplete-results-placeholder"},ze={class:"nui-autocomplete-results-placeholder-text"},Le={key:0,class:"nui-autocomplete-results-header"},Me={key:1,class:"nui-autocomplete-results-footer"},He=W({__name:"BaseAutocomplete",props:{modelValue:{default:void 0},items:{default:()=>[]},shape:{default:void 0},label:{default:""},labelFloat:{type:Boolean},icon:{default:void 0},i18n:{default:()=>({pending:"Loading ...",empty:"Nothing found."})},placeholder:{default:""},error:{type:[String,Boolean],default:""},size:{default:"md"},contrast:{default:"default"},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},clearValue:{default:void 0},clearIcon:{default:"lucide:x"},chipClearIcon:{default:"lucide:x"},dropdownIcon:{default:"lucide:chevron-down"},dropdown:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},displayValue:{type:Function,default:_=>_},filterDebounce:{default:0},filterItems:{type:Function,default:(_,o)=>!_||!o?o??[]:o.filter(B=>typeof B!="string"?!1:B?.toLowerCase().includes(_.toLowerCase()))},classes:{default:()=>({})}},emits:["update:modelValue"],setup(_,{expose:o,emit:B}){const t=_,S=X(),C=w(()=>t.shape??S.nui.defaultShapes?.input),l=se(t,"modelValue",B,{passive:!0}),m=P(t.items),i=Q(""),V=oe(i,t.filterDebounce),u=P(t.dropdown?t.items:[]),x=Q(!1),q=w(()=>i.value!==V.value),d=w(()=>x.value||q.value),F={straight:"",rounded:"nui-autocomplete-rounded",smooth:"nui-autocomplete-smooth",curved:"nui-autocomplete-curved",full:"nui-autocomplete-full"},z={sm:"nui-autocomplete-sm",md:"nui-autocomplete-md",lg:"nui-autocomplete-lg"},L={default:"nui-autocomplete-default","default-contrast":"nui-autocomplete-default-contrast",muted:"nui-autocomplete-muted","muted-contrast":"nui-autocomplete-muted-contrast"};ne("BaseAutocompleteContext",ue({selected:l,items:m,filteredItems:u,query:i,pending:d,clear:M,removeItem:N})),o({selected:l,filteredItems:u,query:i,pending:d,clear:M,removeItem:N}),ie(V,async a=>{x.value=!0;try{u.value=await t.filterItems(a,m.value)}catch(c){if(c?.name==="AbortError")return;throw c}finally{x.value=!1}});function M(){l.value=t.clearValue}const H=w(()=>l.value&&typeof l.value=="object"&&!Array.isArray(l.value)&&"icon"in l.value&&typeof l.value.icon=="string"?l.value.icon:t.icon);function O(a){return!!(a&&typeof a=="object"&&("name"in a&&typeof a.name=="string"||"text"in a&&typeof a.text=="string"||"media"in a&&typeof a.media=="string"||"icon"in a&&typeof a.icon=="string"))}function N(a){if(!Array.isArray(l.value)){l.value=t.clearValue;return}for(let c=l.value.length-1;c>=0;--c)l.value[c]==a&&l.value.splice(c,1)}return(a,c)=>{const A=Y,U=de,K=ke;return s(),g(e(_e),{modelValue:e(l),"onUpdate:modelValue":c[2]||(c[2]=n=>ce(l)?l.value=n:null),multiple:t.multiple,disabled:t.disabled,class:y(["nui-autocomplete",t.classes?.wrapper,z[t.size],L[t.contrast],e(C)&&F[e(C)],t.icon&&"nui-has-icon",t.labelFloat&&"nui-autocomplete-label-float",t.loading&&"nui-autocomplete-loading"]),as:"div"},{default:v(()=>["label"in a.$slots&&!a.labelFloat||t.label&&!t.labelFloat?(s(),g(e(J),{key:0,class:y(["nui-autocomplete-label",a.classes?.label])},{default:v(()=>[b(a.$slots,"label",k(I({query:e(i),filteredItems:e(u),pending:e(d),items:e(m)})),()=>[T($(a.label),1)])]),_:3},8,["class"])):p("",!0),t.multiple?(s(),r("div",Ie,[Array.isArray(e(l))&&e(l).length>0?(s(),r("ul",we,[(s(!0),r(j,null,G(e(l),n=>(s(),r("li",{key:String(n)},[h("div",Be,[T($(t.displayValue(n))+" ",1),h("button",{type:"button",onClick:D=>N(n)},[f(A,{name:a.chipClearIcon,class:"nui-autocomplete-multiple-list-item-icon"},null,8,["name"])],8,$e)])]))),128))])):p("",!0)])):p("",!0),h("div",Ce,[f(e(fe),{class:y(["nui-autocomplete-input",a.classes?.input]),"display-value":t.multiple?void 0:t.displayValue,placeholder:t.placeholder,disabled:t.disabled,onChange:c[0]||(c[0]=n=>i.value=n.target.value)},null,8,["class","display-value","placeholder","disabled"]),"label"in a.$slots&&t.labelFloat||t.label&&t.labelFloat?(s(),g(e(J),{key:0,class:y(["nui-label-float",t.classes?.label])},{default:v(()=>[b(a.$slots,"label",k(I({query:e(i),filteredItems:e(u),pending:e(d),items:e(m)})),()=>[T($(t.label),1)])]),_:3},8,["class"])):p("",!0),e(H)?(s(),r("div",Ve,[f(A,{name:e(H),class:"nui-autocomplete-icon-inner"},null,8,["name"])])):p("",!0),t.clearable&&e(l)?(s(),r("button",{key:2,type:"button",class:y(["nui-autocomplete-clear",[t.classes?.icon,t.dropdown&&"me-6"]]),onClick:M},[f(A,{name:t.clearIcon,class:"nui-autocomplete-clear-inner"},null,8,["name"])],2)):p("",!0),t.dropdown?(s(),g(e(ve),{key:3,class:"nui-autocomplete-clear"},{default:v(({open:n})=>[f(A,{name:t.dropdownIcon,class:y(["nui-autocomplete-clear-inner transition-transform duration-300",[t.classes?.icon,n&&"rotate-180"]])},null,8,["name","class"])]),_:1})):p("",!0),t.loading?(s(),r("div",xe,[f(U,{class:y(["nui-placeload",t.icon&&"ms-6"])},null,8,["class"])])):p("",!0)]),t.error&&typeof t.error=="string"?(s(),r("span",Ae,$(t.error),1)):p("",!0),f(e(re),{leave:"transition ease-in duration-100","leave-from":"opacity-100","leave-to":"opacity-0",onAfterLeave:c[1]||(c[1]=n=>i.value="")},{default:v(()=>[f(e(ye),{as:"div",class:"nui-autocomplete-results"},{default:v(()=>[e(u).length===0&&e(d)?(s(),r("div",Se,[b(a.$slots,"pending",k(I({query:e(i),filteredItems:e(u),pending:e(d),items:e(m)})),()=>[h("span",qe,$(t.i18n.pending),1)])])):e(u).length===0?(s(),r("div",Fe,[b(a.$slots,"empty",k(I({query:e(i),filteredItems:e(u),pending:e(d),items:e(m)})),()=>[h("span",ze,$(t.i18n.empty),1)])])):(s(),r(j,{key:2},["start-item"in a.$slots?(s(),r("div",Le,[b(a.$slots,"start-item",k(I({query:e(i),filteredItems:e(u),pending:e(d),items:e(m)})))])):p("",!0),(s(!0),r(j,null,G(e(u),n=>(s(),g(e(he),{key:String(n),class:"nui-autocomplete-results-item",as:"div",value:n},{default:v(({active:D,selected:R})=>[b(a.$slots,"item",k(I({query:e(i),filteredItems:e(u),pending:e(d),items:e(m),item:n,active:D,selected:R})),()=>[f(K,{shape:e(C),value:O(n)?n:{name:t.displayValue(n)},active:D,selected:R},null,8,["shape","value","active","selected"])])]),_:2},1032,["value"]))),128)),"end-item"in a.$slots?(s(),r("div",Me,[b(a.$slots,"end-item",k(I({query:e(i),filteredItems:e(u),pending:e(d),items:e(m)})))])):p("",!0)],64))]),_:3})]),_:3})]),_:3},8,["modelValue","multiple","disabled","class"])}}});export{ke as _,He as a};
